<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>History</title>
<style>
a{
	text-decoration:none;
	padding:5px;
}

a:hover{
	background:red;
	color:white;
}
/*
ul{background:pink;}
li{background:cyan;}
a{background:green;}
*/
</style>
<script>
//Data JSON
var data = {User1:{name:"anistar", age:21}, 
			User2:{name:"john", age:22}, 
			User3:{name:"mary", age:23}, 
			User4:{name:"kitty", age:24}};
//console.log("data="+data["User1"].name);
window.addEventListener("load", init);

function init()
{
	if(history.pushState){
		document.getElementById("status").innerHTML="History support!";
		document.getElementById("examples").addEventListener("click",clickHandler);
	}else{
		document.getElementById("status").innerHTML="History NOT support!";
	}
}

//click處理邏輯
function clickHandler(e)
{
	e.preventDefault();
	if(e.target.nodeName == "A"){
		var title =e.target.innerHTML;//"User1"
		var url=e.target.getAttribute("href");//"first"
		//$(e.target).attr("href");
		var message = data[title].name+" : "+data[title].age;
		document.getElementById("output").innerHTML=message;
		
		history.pushState(data[title],title,url);
	}
}
/*
var data = {User1:{name:"anistar", age:21}, 
			User2:{name:"john", age:22}, 
			User3:{name:"mary", age:23}, 
			User4:{name:"kitty", age:24}};

*/
</script>
</head>

<body>

<article>
  <p id="status">HTML5 History API not supported</p>
  <p>Use the back and forward buttons in your browser to navigate the history.</p>
  <ul id="examples">
    <li><a href="first">User1</a></li>
    <li><a href="second">User2</a></li>
    <li><a href="third">User3</a></li>
    <li><a href="fourth">User4</a></li>
  </ul>
  <div id="output"></div>
</article>

</body>
</html>
